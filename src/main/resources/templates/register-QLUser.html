
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
layout:decorate="~{layout/main-layout1}" >
    <head>
    <meta charset="ISO-8859-1">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        

        <title>Đăng Ký Người Dùng</title>
    </head>
    <body>
      <article layout:fragment="content" >
        <div class="container" style="margin-top: 10px;">
            <div class="row" style="border: 1px darkgrey solid; border-radius: 10px;width: 50%; margin: 0 50px; padding: 20px;" >
                <div class="col-sm-12">
        <h2>Đăng Ký Người Dùng</h2>
         
          <form th:action="${action}"  th:object=${QLUser} method="post" id="form" onsubmit="return validate()">
           <div class="form-group">
                      
                           
                            <input type="hidden"  th:field="*{id}" class="form-control" name="id" value="" placeholder="Enter id">
                        </div>
                         <div class="form-group">
                      
                            <label>Tên đăng Nhập</label>
                            <input type="text"  th:field="*{tendangnhap}" class="form-control" name="tendangnhap" value="" placeholder="Enter tendangnhap">
                        </div>
                         <div class="form-group">
                      
                            <label>Họ Và tên</label>
                            <input type="text"  th:field="*{hoten}" class="form-control" name="hoten" value="" placeholder="Enter hoten">
                        </div>
                          <div class="form-group">
                      
                            <label>email</label>
                            <input type="text"  th:field="*{email}" class="form-control" name="email" value="" placeholder="Enter email">
                        </div>
                       <div class="form-group">
                            <label>Phòng ban</label>
                         <select th:field="*{idphongban}" class="form-control" id="categorieid" name="idphongban">
							<option th:each="depart:${phongban}"  th:value="${depart.id}"  th:text="${depart.name}">  </option>
						   </select>
                        </div>
                         <div class="form-group">
                         <label>Chức Vụ </label>
                       <select th:field="*{idchucvu}" class="form-control" id="categorieid" name="idchucvu">
							<option th:each="depart:${chucvu}"  th:value="${depart.id}"  th:text="${depart.tencv}">  </option>
						   </select>
                        </div>
                        <div class="form-group">
                         <label>Vai Trò </label>
                       <select th:field="*{idvaitro}" class="form-control" id="categorieid" name="idvaitro">
							<option th:each="depart:${vaitro}"  th:value="${depart.id}"  th:text="${depart.tenvt}">  </option>
						   </select>
                        </div>
					<div class="form-group">
                            <label>Nhóm Người Dùng</label>
                           <select th:field="*{idgroupuser}" class="form-control" id="categorieid" name="idgroupuser">
							<option  th:each="depart:${groupuser}" th:value="${depart.id}" th:text="${depart.tengroup}"></option>
							
						</select>
                        </div>
                         <div class="form-group">
                           <label>Danh Sách Chức năng</label>
							<p th:each="cn:${chucnang}">
							<input type="checkbox"  name="chon"  th:value="${cn.id}" th:text="${cn.tencn}">
							</p>
					
                        </div>
                        <button type="submit" id="button1" class="btn btn-primary">Submit</button>
                        <button type="reset" class="btn btn-danger btn-sm">Cancel</button>
                        <a href="/QLUser/page" class="btn btn-primary">Danh Sách Người Dùng</a>
                    </form>
                </div>
            </div>
        </div>
        </article>
         <script>
        
           
  /*$( document ).ready(function() {
	//  var tendangnhap = document.forms["form"]["tendangnhap"].value;
		//var tendangnhap = $("#tendangnhap").val(),
					        
				    
	    $("#form").submit(function(event) {
	    	 var tendangnhap = document.forms["form"]["tendangnhap"].value;
	  //alert(tendangnhap);
	  
	 
	    //event.preventDefault();
	 
	      $.ajax({
	      type : "POST",
	      contentType : "application/json",
	    data:JSON.stringify(tendangnhap),
	       url : "http://localhost:8081/api/customer/checkten",
	       dataType : 'json',
	     success : function(result) {
	     if(result==null){
	    	
	     }else{
	    	 dd=1;
	    	 alert("ten da ton tai"+dd);
	    	// event.stopPropagation();
	    	  
	    	// return false;
	    	
	     }
	        	},
	      });
	     // resetData();
	    
	     });
	    });*/
	    var dd;
  function validate(){
	    	
	  var tendangnhap = document.forms["form"]["tendangnhap"].value;
	  $.ajax({
	      type : "POST",
	      contentType : "application/json",
	    data:JSON.stringify(tendangnhap),
	       url : "http://localhost:8081/api/customer/checkten",
	       dataType : 'json',
	       async: false,
	     success : function(result) {
	     if(result.tendangnhap=="ten da ton tai"){
	    	dd=1;
	    	 alert("ten da ton tai ");
	     }else{
	    	 dd=2;
	    	
	    	// event.stopPropagation();
	    	   }
	        	},
	        	
	      });
	  if(dd==1){
		  return false;
	  }
	 }
	  
	    </script>

    </body>
</html>